@echo off
if exist th17.dat (
echo Creating backup...
copy th17.dat th17.dat.bak /Y >nul
::changing dir instead of running thth\thdat to make the files unpack into the thtk directory
cd thtk
echo Unpacking th17.dat...
thdat -x 17 C:\Users\phand\Downloads\Touhou 17 - Wily Beast and Weakest Creature\th17.dat >nul
echo Replacing files...
copy ..\shot\pl03.anm pl03.anm /Y >nul
copy ..\shot\pl03.sht pl03.sht /Y >nul
echo Repacking th17.dat...
thdat -c 17 th17.dat ascii.anm ascii_960.anm ascii_1280.anm bullet.anm effect.anm enemy.anm front.anm help.anm pl00.anm pl01.anm pl02.anm pl03.anm sig.anm text.anm title.anm title_v.anm default.ecl musiccmt.txt pl00.sht pl01.sht pl02.sht pl03.sht st01.std st01.ecl st01bs.ecl st01mbs.ecl st01mbs2.ecl st01a.msg st01b.msg st01c.msg st01d.msg st02.std st02.ecl st02bs.ecl st02mbs.ecl st02a.msg st02b.msg st02c.msg st02d.msg st03.std st03.ecl st03bs.ecl st03mbs.ecl st03a.msg st03b.msg st03c.msg st03d.msg st04.std st04.ecl st04bs.ecl st04mbs.ecl st04a.msg st04b.msg st04c.msg st04d.msg st05.std st05.ecl st05bs.ecl st05mbs.ecl st05a.msg st05b.msg st05c.msg st05d.msg st06.std st06.ecl st06bs.ecl st06a.msg st06b.msg st06c.msg st06d.msg st07.std st07.ecl st07bs.ecl st07bs2.ecl st07mbs.ecl st07a.msg st07b.msg st07c.msg st07d.msg st01logo.anm st01enm.anm st01wl.anm st02logo.anm st02enm.anm st02wl.anm st03logo.anm st03enm.anm st03wl.anm st04logo.anm st04enm.anm st04wl.anm st05logo.anm st05enm.anm st05wl.anm st06logo.anm st06enm.anm st06wl.anm st07logo.anm st07enm.anm st07enm2.anm st07enm3.anm st07wl.anm e01.msg e02.msg e03.msg e04.msg e05.msg e06.msg e07.msg e08.msg staff1.msg staff2.msg staff3.msg staff4.msg staff5.msg staff6.msg e01.anm e02.anm e03.anm e04.anm e05.anm e06.anm e07.anm e08.anm staff.anm help_01.png help_02.png help_03.png help_04.png help_05.png help_06.png help_07.png help_08.png help_09.png se_plst00.wav se_enep00.wav se_pldead00.wav se_power0.wav se_power1.wav se_tan00.wav se_tan01.wav se_tan02.wav se_ok00.wav se_cancel00.wav se_select00.wav se_gun00.wav se_cat00.wav se_lazer00.wav se_lazer01.wav se_enep01.wav se_damage00.wav se_item00.wav se_kira00.wav se_kira01.wav se_kira02.wav se_timeout.wav se_graze.wav se_powerup.wav se_pause.wav se_cardget.wav se_damage01.wav se_timeout2.wav se_invalid.wav se_slash.wav se_ch00.wav se_ch01.wav se_extend.wav se_cardget.wav se_nep00.wav se_bonus.wav se_bonus2.wav se_enep02.wav se_lazer02.wav se_nodamage.wav se_boon00.wav se_don00.wav se_boon01.wav se_ch02.wav se_ch03.wav se_extend2.wav se_pin00.wav se_pin01.wav se_lgods1.wav se_lgods2.wav se_lgods3.wav se_lgods4.wav se_lgodsget.wav se_msl.wav se_msl2.wav se_pldead01.wav se_heal.wav se_msl3.wav se_fault.wav se_noise.wav se_etbreak.wav se_tan03.wav se_wolf.wav se_bonus4.wav se_big.wav se_item01.wav demo0.rpy demo1.rpy demo2.rpy thbgm.fmt th15_0100b.ver >nul 2>&1
move /y th17.dat .. >nul
::cleanup
del ascii.anm ascii_960.anm ascii_1280.anm bullet.anm effect.anm enemy.anm front.anm help.anm pl00.anm pl01.anm pl02.anm pl03.anm sig.anm text.anm title.anm title_v.anm default.ecl musiccmt.txt pl00.sht pl01.sht pl02.sht pl03.sht st01.std st01.ecl st01bs.ecl st01mbs.ecl st01mbs2.ecl st01a.msg st01b.msg st01c.msg st01d.msg st02.std st02.ecl st02bs.ecl st02mbs.ecl st02a.msg st02b.msg st02c.msg st02d.msg st03.std st03.ecl st03bs.ecl st03mbs.ecl st03a.msg st03b.msg st03c.msg st03d.msg st04.std st04.ecl st04bs.ecl st04mbs.ecl st04a.msg st04b.msg st04c.msg st04d.msg st05.std st05.ecl st05bs.ecl st05mbs.ecl st05a.msg st05b.msg st05c.msg st05d.msg st06.std st06.ecl st06bs.ecl st06a.msg st06b.msg st06c.msg st06d.msg st07.std st07.ecl st07bs.ecl st07bs2.ecl st07mbs.ecl st07a.msg st07b.msg st07c.msg st07d.msg st01logo.anm st01enm.anm st01wl.anm st02logo.anm st02enm.anm st02wl.anm st03logo.anm st03enm.anm st03wl.anm st04logo.anm st04enm.anm st04wl.anm st05logo.anm st05enm.anm st05wl.anm st06logo.anm st06enm.anm st06wl.anm st07logo.anm st07enm.anm st07enm2.anm st07enm3.anm st07wl.anm e01.msg e02.msg e03.msg e04.msg e05.msg e06.msg e07.msg e08.msg staff1.msg staff2.msg staff3.msg staff4.msg staff5.msg staff6.msg e01.anm e02.anm e03.anm e04.anm e05.anm e06.anm e07.anm e08.anm staff.anm help_01.png help_02.png help_03.png help_04.png help_05.png help_06.png help_07.png help_08.png help_09.png se_plst00.wav se_enep00.wav se_pldead00.wav se_power0.wav se_power1.wav se_tan00.wav se_tan01.wav se_tan02.wav se_ok00.wav se_cancel00.wav se_select00.wav se_gun00.wav se_cat00.wav se_lazer00.wav se_lazer01.wav se_enep01.wav se_damage00.wav se_item00.wav se_kira00.wav se_kira01.wav se_kira02.wav se_timeout.wav se_graze.wav se_powerup.wav se_pause.wav se_cardget.wav se_damage01.wav se_timeout2.wav se_invalid.wav se_slash.wav se_ch00.wav se_ch01.wav se_extend.wav se_cardget.wav se_nep00.wav se_bonus.wav se_bonus2.wav se_enep02.wav se_lazer02.wav se_nodamage.wav se_boon00.wav se_don00.wav se_boon01.wav se_ch02.wav se_ch03.wav se_extend2.wav se_pin00.wav se_pin01.wav se_lgods1.wav se_lgods2.wav se_lgods3.wav se_lgods4.wav se_lgodsget.wav se_msl.wav se_msl2.wav se_pldead01.wav se_heal.wav se_msl3.wav se_fault.wav se_noise.wav se_etbreak.wav se_tan03.wav se_wolf.wav se_bonus4.wav se_big.wav se_item01.wav demo0.rpy demo1.rpy demo2.rpy thbgm.fmt th15_0100b.ver

echo Patch complete!
) else (
echo th17.dat not found! Please refer to the README.txt file
)
pause
